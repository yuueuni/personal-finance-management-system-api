name: Project Automation

on:
  create:
    branches:
      - '**'

jobs:
  move_issue_to_in_progress:
    runs-on: ubuntu-latest
    steps:
      - name: Get issue number from branch name
        id: extract_issue
        run: |
          BRANCH_NAME="${{ github.ref_name }}"
          ISSUE_NUMBER=$(echo "$BRANCH_NAME" | grep -oE '[0-9]+$' || echo "")
          echo "ISSUE_NUMBER=$ISSUE_NUMBER" >> $GITHUB_ENV

      - name: Move issue to "In Progress"
        if: env.ISSUE_NUMBER != ''
        run: |
          curl -X POST -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" \
               -H "Accept: application/vnd.github.v3+json" \
               https://api.github.com/projects/columns/YOUR_IN_PROGRESS_COLUMN_ID/cards \
               -d '{"content_id": "${{ env.ISSUE_NUMBER }}", "content_type": "Issue"}'
